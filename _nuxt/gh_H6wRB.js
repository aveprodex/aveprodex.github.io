import{as as a,a4 as t,a8 as e,a9 as s,a2 as o,f as n,h as c,i as r,c as l,o as i,G as u,a as p,H as d,I as m,w as f,b as g,K as x,t as v,W as y,d as b,j as h,ae as k,c7 as _,ca as w}from"./C1fvdsSF.js";import{E as C,a as $}from"./rP0JeNkw.js";import"./BfEthlv8.js";import"./BpYdBJN9.js";import{b as F,c as G,s as j,o as B,r as T}from"./fqR6pdbk.js";import{E as D}from"./ByxZ288l.js";import"./Cg-3-cPy.js";function A(n="add"){const{$i18n:c}=a();return new Promise(((r,l)=>{t.prompt("",c.t("enterGroupName"),{confirmButtonText:c.t("confirm1"),cancelButtonText:c.t("cancel"),inputValidator:a=>a?!((null==a?void 0:a.length)>20)||(l(),c.t("maximum10characters")):(l(),c.t("enterGroupName"))}).then((({value:t})=>{"add"===n?function(t,n,c){const{evmAddress:r}=e(),{address:l}=s(),{$i18n:i}=a(),u=D.service();F(t,r||l).then((()=>{o.success(i.t("success")),n(!0)})).catch((a=>{o.error(i.t("fail")),c()})).finally((()=>{u.close()}))}(t,r,l):r(t)}))}))}const E={class:"w-full px-5px [&&]:text-12px"},N=["onClick"],z=["onClick"],H=n({__name:"dialogGroupManage",props:{list:{type:Array,default:()=>[]},getData:{type:Function,default:()=>{}},loading:Boolean},setup(a){const{t:n}=c(),F=e(),D=s(),H=r((()=>F.evmAddress||D.address)),I=_(w.FAV_DIALOG),L=a,V=r((()=>L.list.slice(1)));async function K(a){const{value:e}=await t.prompt("",n("enterRemark"),{confirmButtonText:n("confirm1"),cancelButtonText:n("cancel"),inputValidator:a=>a?!((null==a?void 0:a.length)>20)||n("maximum10characters"):n("cannotBeEmpty")});!async function(a,t){try{await G(a,t,H.value),o.success(n("success")),L.getData(),I.emit({type:"changeFavoriteGroupName"})}catch(e){}}(e,a.group_id)}async function M(a,t,e){const s=a.group_id,c=t+e;if(c<0||c+1>V.value.length)return;const r=V.value[c].group_id;try{await B(s,r,H.value),o.success(n("success")),L.getData()}catch(l){o.error(n("fail"))}}async function P(){await A(),L.getData()}return(e,s)=>{const c=k,r=C,_=y,w=$,F=d;return i(),l("div",E,[u((i(),m(w,{data:h(V),height:"325px",class:"[--el-font-size-base:12px]"},{empty:f((()=>[g(c)])),default:f((()=>[g(r,{label:e.$t("groupName"),prop:"name"},null,8,["label"]),g(r,{label:e.$t("rename"),align:"center"},{default:f((({row:a})=>[p("span",{class:"cursor-pointer",onClick:x((t=>K(a)),["stop","prevent"])},v(e.$t("edit")),9,N)])),_:1},8,["label"]),g(r,{prop:"name",label:e.$t("sort"),align:"center"},{default:f((({row:a,$index:t})=>[g(_,{size:"large",link:"",disabled:0===t,onClick:x((e=>async function(a,t){if(0!==t)try{await j(a.group_id,H.value),o.success(n("success")),L.getData()}catch(e){o.error(n("fail"))}}(a,t)),["stop"])},{default:f((()=>[b(v(e.$t("top")),1)])),_:2},1032,["disabled","onClick"]),g(_,{link:"",size:"large",disabled:0===t,onClick:x((e=>M(a,t,-1)),["stop"])},{default:f((()=>[b(v(e.$t("up")),1)])),_:2},1032,["disabled","onClick"]),g(_,{link:"",size:"large",disabled:t+1===h(V).length,onClick:x((e=>M(a,t,1)),["stop"])},{default:f((()=>[b(v(e.$t("down")),1)])),_:2},1032,["disabled","onClick"])])),_:1},8,["label"]),g(r,{label:e.$t("operate"),align:"center"},{default:f((({row:a})=>[p("span",{class:"cursor-pointer",onClick:x((e=>async function(a){await t.confirm(n("removeFavGroupTips"),n("tips"),{confirmButtonText:n("confirm"),cancelButtonText:n("cancel"),dangerouslyUseHTMLString:!0,customClass:""});try{await T(a.group_id,H.value),o.success(n("success")),L.getData(),I.emit({type:"removeFavoriteGroup",groupId:a.group_id})}catch(e){}}(a)),["stop","prevent"])},v(e.$t("delete")),9,z)])),_:1},8,["label"])])),_:1},8,["data"])),[[F,a.loading]]),p("span",{class:"mt-20px cursor-pointer px-26px py-12px text-14px font-500 radius-6px block text-center color-[--d-F5F5F5-l-333] bg-[--d-3F80F7-l-EAECEF] hover:opacity-80",onClick:P},v(h(n)("newGroup")),1)])}}});export{H as default};
